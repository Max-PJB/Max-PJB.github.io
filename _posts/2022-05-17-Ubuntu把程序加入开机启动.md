---
title: Ubuntu把程序加入开机启动
categories:
  - ubuntu
tags:
  - ubuntu
  - config
  - service
---

# Ubuntu把程序加入开机启动

以 `jupyter` 开机启动为例，之前配置了腾讯云的一个 `jupyer` 服务端，需要把他作为开机启动项。

采用 `systemctl` + `service` 的方式

### 一、编写启动脚本

`vim /opt/jupyter_autostart.sh` 编写开机启动脚本

```shell
#!/bin/sh
/bin/echo $(/bin/date +%F_%T) >> /path/to/startup.log
/root/anaconda3/bin/jupyter notebook > /path/to/jupyter.log 2>&1
# 2>&1就是用来将标准错误2重定向到标准输出1中的。此处1前面的&就是为了让bash将1解释成标准输出而不是文件1。至于最后一个&，则是让bash在后台执行.
```



### 二、添加启动服务

`vim /etc/systemd/system/jupyter.service`

```shell
[Unit]
Description=jupyter.sh
After=network.target

[Service]
Type=simple
ExecStart=/opt/jupyter_autostart.sh
ExecReload=/bin/kill -s HUP $MAINPID
RestartSec=2s
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

### 三、服务操作命令

```shell
## 查看服务状态
$ systemctl status jupyter.service

## 启动服务
$ systemctl start jupyter.service

## 设置开机自启动
$ systemctl enable jupyter.service

## 取消开机自启动
$ systemctl disable jupyter.service
```

